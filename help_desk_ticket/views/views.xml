<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Extended view = helpdesk team form (HELPDESK Team creation form) -->
        <record id="helpdesk_team_ext" model="ir.ui.view">
            <field name="name">helpdesk_team_ext</field>
            <field name="model">helpdesk.team</field>
            <field name="inherit_id" ref="helpdesk.helpdesk_team_view_form" />
            <field name="arch" type="xml">
                <xpath expr="//sheet//div//div[3]//div[2]//field[@name='visibility_member_ids']" position="after">
                    <div>.</div>
                    <div>.</div>
                    <div>
                        <group string=' '>
                            <!-- <label for="ticket_type">Ticket type: </label> -->
                            <field name="default_team"/>
                            <field name="ticket_type" widget="many2many_tags" />
                        </group>
                    </div>
                    <div>.</div>
                    <div>
                        <label for="ticket_tag">Ticket tag: </label>
                        <field name="ticket_tag" widget="many2many_tags" />
                    </div>
                </xpath>
            </field>
        </record>
        <!-- Extended view = All tickets (create ticket forms) -->
        <record id="helpdesk_type_ext" model="ir.ui.view">
            <field name="name">helpdesk_type_ext</field>
            <field name="model">helpdesk.ticket</field>
            <field name="inherit_id" ref="helpdesk.helpdesk_ticket_view_form" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='ticket_type_id']" position="replace">
                    <field name="ticket_type_id" domain="[('id', 'in', ticket_type)]" />
                    <field name="ticket_type" widget="many2many_tags" nolabel="1" invisible="1" />
                </xpath>
                <xpath expr="//field[@name='tag_ids']" position="replace">
                    <field name="tag_ids" domain="[('id', 'in', ticket_type)]" widget="many2many_tags" options="{'color_field': 'color'}" />
                </xpath>

                <xpath expr="//field[@name='partner_id']" position="attributes">
                     <attribute name ="readonly">1</attribute>       
                </xpath>


                <xpath expr="//field[@name='partner_id']" position="attributes">
                     <attribute name="options">{'no_open':True}</attribute> 
                </xpath>

                <xpath expr="//field[@name='partner_email']" position="attributes">
                     <attribute name ="readonly">1</attribute>       
                </xpath>


            </field>
        </record>
        <!-- Extended view = All tickets (create ticket forms) -->
        <record id="helpdesk_stage_ext" model="ir.ui.view">
            <field name="name">helpdesk_stage_ext</field>
            <field name="model">helpdesk.stage</field>
            <field name="inherit_id" ref="helpdesk.helpdesk_stage_view_form" />
            <field name="arch" type="xml">
                
                <xpath expr="//field[@name='is_close']" position="after">
                    <field name="in_progress_stage"/>
                </xpath>

            </field>
        </record>
    </data>

        <template id="rating_external_page_submit_re_open" name="Rating Page Submit">
            <t t-call="web.frontend_layout">
                <div class="container card mb-5 mt-4 o_rating_page_submit">
                    <div class="card-body">
                        <div class="row text-center justify-content-center">
                            <h1 class="col-12 mt-5">Are you sure you want to re open the ticket!</h1>
                            <form t-attf-action="/rate/#{token}/submit_feedback" method="post">
                                <div class="btn-group btn-group-toggle row" data-toggle="buttons">
                                    <t t-foreach="rate_names" t-as="rate_name">
                                        <label t-attf-class="col-xs-12 btn o_rating_label shadow-none {{rate == rate_name and 'active' or ''}}">
                                            <input type="radio" name="rate" t-attf-id="rate_{{rate_name}}" t-att-value="rate_name" t-att-checked="rate == rate_name"/>
                                            <!-- <a class="o_rating" href="#">
                                                <img t-attf-src='/rating/static/src/img/rating_#{rate_name}.png' t-att-alt="rate_name_value" t-att-title="rate_name_value"/>
                                            </a> -->
                                        </label>
                                    </t>
                                </div>
                                <div class="clearfix"></div>
                                <p class="mt-5">
                                    Comment Box:
                                </p>
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <textarea class="form-control" name="feedback" rows="8" t-att-value="rating.feedback" required="1"></textarea>
                                <button type="submit" class="btn btn-primary" style="margin-top:8px;">Re Open</button>
                            </form>
                        </div>
                    </div>
                </div>
            </t>
        </template>
</odoo>